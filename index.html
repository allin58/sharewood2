<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>Leaflet с поддержкой тачскрина</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        html, body { height: 100%; margin: 0; padding: 0; }
        #map { height: 100%; width: 100%; touch-action: none; } /* предотвращает прокрутку страницы при свайпе */
        .leaflet-popup-content-wrapper {
            font-size: 1.1em; /* чуть крупнее текст для пальцев */
        }
        .leaflet-control-zoom {
            transform: scale(1.3); /* крупнее кнопки зума */
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Создаём карту с улучшенными настройками для тачскрина
        const map = L.map('map', {
            center: [55.751244, 37.618423],
            zoom: 10,
            zoomControl: true,
            attributionControl: true,

            // ВАЖНО: оптимизация для сенсорных устройств
            tap: true,                // поддержка "тапов" (включено по умолчанию)
            touchZoom: true,          // масштабирование двумя пальцами
            dragging: true,           // перетаскивание карты
            tapTolerance: 10,         // небольшая толерантность к дрожанию пальца
            inertia: true,            // инерция при пролистывании
            inertiaDeceleration: 2000 // плавная остановка карты
        });

        // Добавляем слой OSM
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            maxZoom: 19,
            attribution: '&copy; OpenStreetMap contributors'
        }).addTo(map);

        // Цветные иконки (как в предыдущем примере)
        const redIcon = L.icon({
            iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-red.png',
            shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
            iconSize: [30, 49],
            iconAnchor: [15, 49],
            popupAnchor: [1, -40],
            shadowSize: [41, 41]
        });

        const greenIcon = L.icon({
            iconUrl: 'https://raw.githubusercontent.com/pointhi/leaflet-color-markers/master/img/marker-icon-green.png',
            shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png',
            iconSize: [30, 49],
            iconAnchor: [15, 49],
            popupAnchor: [1, -40],
            shadowSize: [41, 41]
        });

        // Добавляем метки
        L.marker([55.751244, 37.618423], { icon: redIcon })
            .addTo(map)
            .bindPopup('Москва — красная метка');

        L.marker([55.8304, 37.4095], { icon: greenIcon })
            .addTo(map)
            .bindPopup('Химки — зелёная метка');
    </script>
</body>
</html>
